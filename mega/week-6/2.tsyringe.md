# 2.TSyringe

## TSyringe

[TSyringe](https://github.com/microsoft/tsyringe)

ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ì—ì„œ ë§Œë“  TypeScriptìš© DI ë„êµ¬(IoC Container)

> _Lightweight dependency injection container for JavaScript/TypeScript_\
> ê°€ë²¼ìš´ JavaScript/TypeScriptìš© ì¢…ì†ì„± ì£¼ì… ì»¨í…Œì´ë„ˆ

> ğŸ’‰ **Syringe** ì£¼ì‚¬ê¸°

#### íŠ¹ì§•

* External Storeë¥¼ ê´€ë¦¬í•˜ëŠ”ë° í™œìš©í•  ìˆ˜ ìˆìŒ
* React ì»´í¬ë„ŒíŠ¸ ì…ì¥ì—ì„œëŠ” **ì „ì—­**ì²˜ëŸ¼ ì“¸ ìˆ˜ë„ ìˆìŒ
* **Props Drilling** ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ (Reactë¡œ í•œì •í•˜ë©´ Contextë„ ì‚¬ìš© ê°€ëŠ¥)



#### Props Drilling

[The problem with passing props](https://react.dev/learn/passing-data-deeply-with-context#the-problem-with-passing-props)

React ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ëŠ” ìœ„ì—ì„œ ì•„ë˜ë¡œ(ğŸ‘¨â€ğŸ‘©â€ë¶€ëª¨ -> ğŸ‘§ìì‹) propsë¥¼ í†µí•´ ì „ë‹¬\
propsë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì˜ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì— ì „í•´ì¤˜ì•¼í•˜ëŠ” ê²½ìš°ì— ë°œìƒí•˜ëŠ” ë¬¸ì œ

1. ë„ˆë¬´ ë§ì€ ì»´í¬ë„ŒíŠ¸ ë‹¨ê³„ë¥¼ ê±°ì³ì•¼ í•¨
2. ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ê°€ propsë¥¼ ì´ìš©í•˜ì§€ ì•Šì•„ë„ ë„˜ê²¨ì¤˜ì•¼ í•¨
3. í˜•ì œ ê´€ê³„ì˜ ì»´í¬ë„ŒíŠ¸ ê°„ì˜ props ì „ë‹¬ì´ ë³µì¡

â‡’ âš ï¸ ë°ì´í„°ê°€ ë§ì•„ì§€ê³ , ì»´í¬ë„ŒíŠ¸ë¥¼ ë” ë§ì´ ê±°ì³ì•¼ í•˜ëŠ” ê²½ìš° **ìœ ì§€ ë³´ìˆ˜ì„±ì´ ë‚®ì•„ì§ˆ ìˆ˜ ìˆìŒ**



#### ì‚¬ìš© ë°©ë²•

ì˜ì¡´ì„± ì„¤ì¹˜

```bash
npm i tsyringe reflect-metadata
```

`src/main.tsx` íŒŒì¼ê³¼ `src/setupTests.ts` íŒŒì¼ì—ì„œ reflect-metadata ì„í¬íŠ¸.

```tsx
import 'reflect-metadata';
```

ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬í•  CounterStore í´ë˜ìŠ¤ë¥¼ ì¤€ë¹„:

```tsx
import { singleton } from 'tsyringe';

@singleton()
class CounterStore {
	// â€¦(ì¤‘ëµ)...
}
```

ì‹±ê¸€í†¤ CounterStore ê°ì²´ë¥¼ ì‚¬ìš©:

```tsx
import { container } from 'tsyringe';

const counterStore = container.resolve(CounterStore);
```

í…ŒìŠ¤íŠ¸ì—ì„œ TSyringeì—ì„œ ê´€ë¦¬í•˜ëŠ” ê°ì²´ë¥¼ ì´ˆê¸°í™”í•  ìˆ˜ ìˆë‹¤.

```tsx
container.clearInstances();
```

