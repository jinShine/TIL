# 1.TDD



## TDD

{% hint style="info" %}
í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë¨¼ì € ìž‘ì„±í•˜ëŠ”, ì¦‰ êµ¬í˜„ë³´ë‹¤ ì¸í„°íŽ˜ì´ìŠ¤ì™€ ìŠ¤íŽ™ì„ ë¨¼ì € ì •ì˜í•¨ìœ¼ë¡œì¨ ê°œë°œì„ ì§„í–‰í•˜ëŠ” ë°©ì‹.
{% endhint %}



> [í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ](https://github.com/ahastudio/til/blob/main/agile/test-driven-development.md)
>
> [TDD FAQ](https://github.com/ahastudio/til/blob/main/blog/2016/12-03-tdd-faq.md)\
> [Jestë¥¼ ì´ìš©í•œ ê°„ë‹¨í•œ TDD ì˜ˆì œ](https://github.com/ahastudio/til/blob/main/jest/20201204-simple-tdd-example.md)



**TDD Cycle**

1. Red â†’ ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìž‘ì„±. ì¸í„°íŽ˜ì´ìŠ¤ì™€ ìŠ¤íŽ™ì— ì§‘ì¤‘í•œë‹¤.
2. Green â†’ ìž¬ë¹¨ë¦¬ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œí‚¨ë‹¤. ì˜¬ë°”ë¥¸ ë°©ë²•ì´ ì•„ë‹ˆì–´ë„ ê´œì°®ë‹¤.
3. Refactor â†’ ë¦¬íŒ©í„°ë§ì„ í†µí•´ ì½”ë“œë¥¼ ì˜¬ë°”ë¥´ê²Œ ë§Œë“ ë‹¤. TDDì—ì„œ ê°€ìž¥ ì¤‘ìš”í•œ ë¶€ë¶„ì´ì§€ë§Œ, ê°„ê³¼ë  ë•Œê°€ ë§Žë‹¤.

ìž‘ì€ ë‹¨ê³„ë¥¼ ì°¾ê³ , ì½”ë“œì—ì„œ í”¼ë“œë°±ì„ ì–»ëŠ” ê²ƒì´ ì–´ë µê³  ì¤‘ìš”í•œ í¬ì¸íŠ¸\
2ë²ˆì´ ì–´ë µë‹¤ë©´ 1ë²ˆìœ¼ë¡œ ëŒì•„ê°€ì„œ ë” ìž‘ê³  ì‰¬ìš´ ë¬¸ì œë¥¼ ì •ì˜í•˜ê³ ,\
3ë²ˆì„ ìœ„í•´ ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ê³  ì¤‘ë³µì„ ì°¾ì•„ ì œê±°í•˜ëŠ” ì—°ìŠµì„ í•´ì•¼ í•¨\
ì´ ë‘˜ì´ ìµìˆ™í•˜ì§€ ì•Šìœ¼ë©´ TDDë¥¼ í•˜ëŠ” ê²Œ ê±°ì˜ ë¶ˆê°€ëŠ¥í•˜ê³ , ì´ ë‘˜ì´ ì–´ë ¤ìš°ë©´ ì¼ë°˜ì ì¸ ê°œë°œ ë˜ëŠ” í´ë¦° ì½”ë“œë¥¼ ìž‘ì„±í•˜ëŠ” ê²ƒ ë˜í•œ ë§¤ìš° íž˜ë“¬





### Jest

> [Jest](https://jestjs.io/)\
> [Given-When-Then](https://github.com/ahastudio/til/blob/main/blog/2018/12-08-given-when-then.md)

JestëŠ” ë‹¨ìˆœì„±ì— ì´ˆì ì„ ë‘” JavaScript í…ŒìŠ¤íŠ¸ í”„ë ˆìž„ì›Œí¬\
JestëŠ” Mochaì™€ Chaiì²˜ëŸ¼ RSpecì˜ describe-itì„ ì§€ì›í•˜ê³ , expectë¡œ ë‹¨ì–¸(assertion) ê°€ëŠ¥\
Mockingë„ ë‹¤ì–‘í•œ ë ˆë²¨ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆìŒ\
â‡’ ê±°ì˜ ëª¨ë“  ê²ƒì„ ê°–ì¶˜ í…ŒìŠ¤íŒ… ë„êµ¬ ðŸ› \
\


**Jestì—ì„œ TypeScript ì‚¬ìš©í•˜ë„ë¡ `jest.config.js` íŒŒì¼ ìž‘ì„±**

```tsconfig
module.exports = {
	testEnvironment: 'jsdom',
	setupFilesAfterEnv: [
		'@testing-library/jest-dom/extend-expect',
	],
	transform: {
		'^.+\\.(t|j)sx?$': ['@swc/jest', {
			jsc: {
				parser: {
					syntax: 'typescript',	
					jsx: true,
					decorators: true,
				},
				transform: {	
					react: {
						runtime: 'automatic',
					},
				},
			},
		}],
	},
};
```



**íŒŒì¼ëª…**

```
í…ŒìŠ¤íŠ¸í•˜ê³  ì‹¶ì€ ê²ƒ.spec | test.í™•ìž¥ìž
```

* sample.test.ts
* sample.spec.ts - ì£¼ë¡œ BDD ìŠ¤íƒ€ì¼ë¡œ ì‚¬ìš©í• ë•Œ



**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì •ì˜í•˜ëŠ” ë‘ê°€ì§€ ë°©ë²•**

1. test í•¨ìˆ˜ë¡œ ê°œë³„ í…ŒìŠ¤íŠ¸ë¥¼ ë‚˜ì—´í•˜ëŠ” ë°©ì‹

```typescript
test("add", () => {
    expect(add(1, 2)).toBe(3)
})
```



2. BDD ìŠ¤íƒ€ì¼ë¡œ ì£¼ì²´-í–‰ìœ„ ì¤‘ì‹¬ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì¡°ì§í™”í•˜ëŠ” ë°©ì‹.
   1. describe - ì„¤ëª…í•  í…ŒìŠ¤íŠ¸ ëŒ€ìƒì„ ëª…ì‹œ
   2. context - í…ŒìŠ¤íŠ¸ ëŒ€ìƒì´ ë†“ì¸ ìƒí™©ì„ ì„¤ëª…
   3. it - í…ŒìŠ¤íŠ¸ ëŒ€ìƒì˜ í–‰ë™ì„ ì„¤ëª…

```typescript
describe("add", () => {
    it("return sum of two numbers", () => {
        expect(add(1, 2)).toBe(3)
    })
})
```

ë‹¤ë¥¸ ë‹¤ì–‘í•œ ê²½ìš°

```typescript
const context = describe

describe("add", () => {
    context("with no argument", () => {
        it("returns zero", () => {
            expect(add()).toBe(0)
        })
    })
    
    context("with only one number", () => {
        it("returns the same number", () => {
            expect(add(1)).toBe(1)
        })
    })
    
    context("with two numbers", () => {
        it("returns sum of two numbers", () => {
            expect(add(1, 2)).toBe(3)
        })
    })
    
    context('with three numbers', () => {
    	it('returns sum of three numbers', () => {
    	    expect(add(1, 2, 3)).toBe(6);
    	});
    });
})
```
